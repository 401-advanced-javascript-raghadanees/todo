(this["webpackJsonpdemo-context-api"]=this["webpackJsonpdemo-context-api"]||[]).push([[0],{176:function(e,t,a){e.exports=a(325)},185:function(e,t,a){},186:function(e,t,a){},207:function(e,t){},209:function(e,t){},223:function(e,t){},225:function(e,t){},253:function(e,t){},255:function(e,t){},256:function(e,t){},261:function(e,t){},263:function(e,t){},270:function(e,t){},272:function(e,t){},290:function(e,t){},292:function(e,t){},304:function(e,t){},307:function(e,t){},325:function(e,t,a){"use strict";a.r(t);var n=a(17),o=a(18),r=a(20),l=a(19),c=a(0),i=a.n(c),s=a(39),u=a.n(s),m=(a(181),a(14)),d=a(329),h=a(328),p=a(327),g=a(23),f=a(48),E=function(e){var t=Object(c.useState)({}),a=Object(m.a)(t,2),n=a[0],o=a[1];return[function(t){console.log("Generic submit handler ..."),t.preventDefault(),e(n),o(Object(f.a)(Object(f.a)({},n),{},Object(g.a)({},t.target.name,t.target.value)))},function(e){o(Object(f.a)(Object(f.a)({},n),{},Object(g.a)({},e.target.name,e.target.value))),console.log("Generic Change Handler ...")}]};var b=function(e){var t=E((function(t){console.log("handelUseForm,,,,,"),e.handleSubmit(t)})),a=Object(m.a)(t,2),n=a[0],o=a[1];return i.a.createElement(d.a,{style:{marginRight:"8em",marginLeft:"8em"}},i.a.createElement(h.a,{style:{padding:"2em"}},i.a.createElement("h3",null,"Add Item"),i.a.createElement("form",{onSubmit:n},i.a.createElement("label",null,i.a.createElement("span",null,"To Do Item"),i.a.createElement("input",{name:"text",placeholder:"Add To Do List Item",onChange:o})),i.a.createElement("label",null,i.a.createElement("span",null,"Assigned To"),i.a.createElement("input",{type:"text",name:"assignee",placeholder:"Assigned To",onChange:o})),i.a.createElement("label",null,i.a.createElement("span",null,"Difficulty Rating"),i.a.createElement("input",{defaultValue:"1",type:"range",min:"1",max:"5",name:"difficulty",onChange:o})),i.a.createElement(p.a,{onClick:n,variant:"primary",size:"lg",active:!0},"Add Item"))))},v=a(330),y=(a(185),i.a.createContext());var C=function(e){var t=Object(c.useState)(3),a=Object(m.a)(t,2),n=a[0],o=a[1],r=Object(c.useState)("difficulty"),l=Object(m.a)(r,2),s=l[0],u=l[1],d=Object(c.useState)(!1),h=Object(m.a)(d,2),p=h[0],g=h[1];console.log("showComplete, setShowComplete",p,g);var f={tasksPerPage:n,sort:s,showComplete:p,setTasksPerPage:o,setSort:u,setShowComplete:g};return i.a.createElement(y.Provider,{value:f},e.children)};var k=function(e){var t=Object(c.useContext)(y);console.log("from list ----\x3e",t.tasksPerPage,"list ----\x3e",e.page-1),console.log("list2 ----\x3e",e.page*t.tasksPerPage);var a=e.list.filter((function(e){return t.showComplete?e.complete:!e.complete}));console.log("tasksFilter--------------------",a);var n=a.sort((function(e,a){return(e=e[t.sort])>(a=a[t.sort])?-1:e<a?1:0})).slice((e.page-1)*t.tasksPerPage,e.page*t.tasksPerPage);return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{class:"d-inline",style:{width:"5.5rem",fontSize:"0.7rem",margin:"0.5rem",float:"right"},variant:"dark",onClick:function(){return t.showComplete?t.setShowComplete(!1):t.setShowComplete(!0)}}," Other tasks"),i.a.createElement(v.a,{style:{width:"26rem"},className:"ml-5"},n.map((function(t){return i.a.createElement(v.a.Item,{variant:t.complete?"success":"secondary",key:t._id,onClick:function(){return e.handleComplete(t._id)},className:"mb-2"},i.a.createElement(d.a,{style:{width:"23.5rem"}},i.a.createElement("div",null,i.a.createElement(p.a,{class:"d-inline",style:{width:"6rem"},variant:t.complete?"success":"danger"}," ",t.complete?"complete":"pending"," "),i.a.createElement(p.a,{class:"d-inline",style:{width:"2rem"},variant:"light",className:"float-right",onClick:function(){return e.handleDelete(t._id)}},"  ",console.log("list item._id -----\x3e",t._id),"X")),i.a.createElement(d.a.Body,{style:{padding:"0.4rem"}},i.a.createElement(d.a.Subtitle,{className:"mb-2 bottom"},t.assignee),i.a.createElement(d.a.Text,null,i.a.createElement("p",null,t.text),i.a.createElement("p",{style:{fontSize:"0.6rem",float:"left"}},"Difficulty : ",t.difficulty)))))}))))},O=a(96),j=a(31),x=(a(186),a(97)),S=a(30),w=a.n(S),I=function(e,t){return[function(e){w.a.get(e).then((function(e){console.log("res...",e),t(Object(x.a)(e.data.results))}))},function(a,n){var o={mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},cache:"no-cache",body:JSON.stringify(n)};w.a.post(a,n,o).then((function(a){console.log("post  --\x3e",a),t([].concat(Object(x.a)(e),[a.data]))}))},function(a,n){var o={mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},cache:"no-cache",body:JSON.stringify(n)};w.a.put(a,n,o).then((function(a){console.log("put  --\x3e",a),console.log("put data --\x3e",n),console.log("put list --\x3e",e),t(e.filter((function(e){return e._id===n._id?a.data:e})))}))},function(a,n){var o={mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},cache:"no-cache"};w.a.delete(a,o).then((function(a){console.log("delete  --\x3e",a),t(e.filter((function(e){return e._id!==n})))}))}]},P="https://todo-api-laith.herokuapp.com/api/v1/todos",T=function(){var e=Object(c.useContext)(y),t=Object(c.useState)([]),a=Object(m.a)(t,2),n=a[0],o=a[1],r=Object(c.useState)(1),l=Object(m.a)(r,2),s=l[0],u=l[1],d=I(n,o),h=Object(m.a)(d,4),p=h[0],g=h[1],f=h[2],E=h[3];Object(c.useEffect)((function(){p(P)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,{variant:"tabs",defaultActiveKey:"/home",style:{backgroundColor:"rgb(238, 238, 245)",paddingLeft:"5%"}},i.a.createElement(j.a.Item,{style:{paddingLeft:"0.5rem"}},i.a.createElement(j.a.Link,{href:"/home"},"HOME")),i.a.createElement(j.a.Item,{style:{paddingLeft:"0.5rem"}},i.a.createElement(j.a.Link,{href:"/home"},"SIGN UP"))),i.a.createElement("header",{style:{padding:"0.5rem",marginRight:"4%",marginLeft:"4%"}},i.a.createElement(O.a,{bg:"dark",variant:"dark"},i.a.createElement(O.a.Brand,null,console.log("list -------\x3e>>>",n),"There are ",n.filter((function(e){return!e.complete})).length,"  tasks to complete and  ",n.filter((function(e){return e.complete})).length," completed tasks"))),i.a.createElement("section",{className:"todo"},i.a.createElement("div",null,i.a.createElement(b,{handleSubmit:function(e){e.due=new Date,g(P,e)}})),i.a.createElement("div",null,i.a.createElement(k,{list:n,page:s,handleComplete:function(e){var t=n.filter((function(t){return t._id===e}))[0]||{};if(t._id){t.complete=!t.complete;var a="".concat(P,"/").concat(e);f(a,t)}},handleDelete:function(e){if((n.filter((function(t){return t._id===e}))[0]||{})._id){var t="".concat(P,"/").concat(e);E(t,e)}}}),i.a.createElement("div",{className:"ml-5"},i.a.createElement("button",{type:"button",className:1===s&&n.filter((function(t){return!!e.showComplete||!t.complete})).length>=e.tasksPerPage?"d-none btn btn-secondary mr-2":" btn btn-secondary mr-2",onClick:function(){u(s-1)}},"previous"),i.a.createElement("button",{type:"button",className:Math.ceil(n.filter((function(t){return!!e.showComplete||!t.complete})).length/e.tasksPerPage)===s?"d-none btn btn-secondary mr-2":" btn btn-secondary mr-2",onClick:function(){u(s+1)}},"next")))),i.a.createElement("footer",{class:"page-footer font-small blue"},i.a.createElement(j.a,{variant:"tabs",defaultActiveKey:"/home",style:{backgroundColor:"rgb(210, 210, 215)"}},i.a.createElement("div",{class:"footer-copyright text-center py-3"},"\xa9 2020 Copyright ToDo "))))},A=a(49),L=a.n(A),N=a(94),B=a(174),D=a.n(B),_=a(175),G=a.n(_),z=a(95),F=a.n(z),U=i.a.createContext(),V="https://todo-api-laith.herokuapp.com/api/v1/users",J=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).isValidAction=function(e){var t={admin:["edit","delete","read"],user:["read"],editor:["edit","read"]},a=o.state.user.user.role;return console.log("role ::::::: ",a),console.log("actions[role].includes(action): ",t[a].includes(e)),t[a].includes(e)},o.signup=function(){var e=Object(N.a)(L.a.mark((function e(t,a,n,r){var l,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("password signup",a,t),e.prev=1,e.next=4,fetch("".concat(V,"/signup"),{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a,email:n,role:r})});case 4:return l=e.sent,e.next=7,l.json();case 7:c=e.sent,console.log("res Signup: ",c),o.validateToken(c.token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("error : ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a,n,o){return e.apply(this,arguments)}}(),o.login=function(){var e=Object(N.a)(L.a.mark((function e(t,a){var n,r,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("username...... ",t,a),n=D.a.encode("".concat(t,":").concat(a)),e.next=5,w()({method:"post",url:"".concat(V,"/signin"),mode:"cors",cache:"no-cache",headers:{Authorization:"Basic ".concat(n)}});case 5:r=e.sent,console.log("result...........",r),l=r.data.token,localStorage.setItem("token",l),o.validateToken(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("error : ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}(),o.validateToken=function(e){console.log("token >>> ",e);var t=G.a.decode(e);console.log("user >>>> ",t),t&&o.setAuthState(!0,e,t)},o.setAuthState=function(e,t,a){console.log("here setAuthState "),F.a.save("auth",t),o.setState({loggedIn:e,user:a})},o.logout=function(){o.setAuthState(!1,null,{})},o.state={loggedIn:!1,login:o.login,logout:o.logout,user:{},signup:o.signup,isValidAction:o.isValidAction},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=F.a.load("auth")||null;this.validateToken(e)}},{key:"render",value:function(){return i.a.createElement(U.Provider,{value:this.state},this.props.children)}}]),a}(i.a.Component),R=function(e){return e.condition?e.children:null},M=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=!1;try{e=this.context.loggedIn&&this.context.isValidAction(this.props.action)}catch(t){console.log("error in Auth component !")}return i.a.createElement(R,{condition:e},this.props.children)}}]),a}(i.a.Component);M.contextType=U;var H=M,K=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).handleChange=function(e){o.setState(Object(g.a)({},e.target.name,e.target.value))},o.handleSubmit=function(e){e.preventDefault(),console.log("this.state in handleSubmit---",o.state),o.context.login(o.state.username,o.state.password)},o.state={username:"",password:""},o}return Object(o.a)(a,[{key:"render",value:function(){return console.log("this.context.loggedIn >..> ",this.context.loggedIn),i.a.createElement(i.a.Fragment,null,i.a.createElement(R,{condition:this.context.loggedIn},i.a.createElement(p.a,{variant:"danger",type:"submit",onClick:this.context.logout}," Logout ")),i.a.createElement(R,{condition:!this.context.loggedIn},i.a.createElement(d.a,{style:{width:"23.5rem",margin:"35%",marginTop:"2%"}},i.a.createElement(d.a.Text,null,i.a.createElement("h2",null,"Or login!")),i.a.createElement(h.a,{onSubmit:this.handleSubmit},i.a.createElement(h.a.Group,{controlId:"formBasicEmail"},i.a.createElement(h.a.Label,null,"User Name"),i.a.createElement(h.a.Control,{placeholder:"Enter User Name",name:"username",onChange:this.handleChange})),i.a.createElement(h.a.Group,{controlId:"formBasicPassword"},i.a.createElement(h.a.Label,null,"Password"),i.a.createElement(h.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:this.handleChange})),i.a.createElement(p.a,{style:{paddingLeft:"45%",paddingRight:"43%"},variant:"light",type:"submit"}," ",i.a.createElement("b",null,"Login")," ")))))}}]),a}(i.a.Component);K.contextType=U;var W=K,X=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).handleChange=function(e){o.setState(Object(g.a)({},e.target.name,e.target.value))},o.handleSubmit=function(e){e.preventDefault(),console.log("this.state in handleSubmit---",o.state),o.context.signup(o.state.username,o.state.password,o.state.email,o.state.role)},o.state={username:"",password:"",email:"",role:"user"},o}return Object(o.a)(a,[{key:"render",value:function(){return console.log("this.context.loggedIn >.in signuprender.> ",this.context.loggedIn),i.a.createElement(i.a.Fragment,null,i.a.createElement(R,{condition:!this.context.loggedIn},i.a.createElement(d.a,{style:{width:"23.5rem",margin:"35%",marginTop:"5%",marginBottom:"5%"}},i.a.createElement(d.a.Text,null,i.a.createElement("h2",null,"Sign up !")),i.a.createElement(h.a,{onSubmit:this.handleSubmit},i.a.createElement(h.a.Group,{controlId:"formBasicEmail"},i.a.createElement(h.a.Label,null,"User Name"),i.a.createElement(h.a.Control,{type:"username",placeholder:"Enter User Name",name:"username",onChange:this.handleChange})),i.a.createElement(h.a.Group,{controlId:"formBasicEmail"},i.a.createElement(h.a.Label,null,"Email address"),i.a.createElement(h.a.Control,{type:"email",placeholder:"Enter email",onChange:this.handleChange}),i.a.createElement(h.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),i.a.createElement(h.a.Group,{controlId:"formBasicPassword"},i.a.createElement(h.a.Label,null,"Password"),i.a.createElement(h.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:this.handleChange})),i.a.createElement(h.a.Group,{controlId:"formBasicCheckbox"},i.a.createElement(h.a.Check,{type:"checkbox",label:"Check me out"})),i.a.createElement(h.a.Group,{controlId:"formGridState",onChange:this.handleChange},i.a.createElement(h.a.Label,null,"State"),i.a.createElement(h.a.Control,{as:"select",defaultValue:"user"},i.a.createElement("option",{value:"user"},"User"),i.a.createElement("option",{value:"admin"},"Admin"),i.a.createElement("option",{value:"editors"},"Editor"))),i.a.createElement(p.a,{style:{paddingLeft:"45%",paddingRight:"40%"},variant:"dark",type:"submit"}," ",i.a.createElement("b",null,"Submit")," ")))))}}]),a}(i.a.Component);X.contextType=U;var q=X;var Q=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(J,null,i.a.createElement(q,null),i.a.createElement(W,null),i.a.createElement(C,null,i.a.createElement(H,{action:"read"},i.a.createElement(T,null))),i.a.createElement("hr",null)))},Y=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return i.a.createElement(Q,null)}}]),a}(i.a.Component),Z=document.getElementById("root");u.a.render(i.a.createElement(Y,null),Z)}},[[176,1,2]]]);
//# sourceMappingURL=main.47808417.chunk.js.map